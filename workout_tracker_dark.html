<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1a1a2e">
    <title>Strength Block Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        :root {
            --bg-primary: #0f0f1e;
            --bg-secondary: #1a1a2e;
            --bg-tertiary: #16213e;
            --accent-primary: #4a9eff;
            --accent-secondary: #00d9ff;
            --success: #00e676;
            --warning: #ffd600;
            --text-primary: #e4e4e7;
            --text-secondary: #a1a1aa;
            --text-muted: #71717a;
            --border: #27272a;
            --card-bg: #18181b;
            --purple: #a78bfa;
            --orange: #fb923c;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            background: var(--bg-secondary);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: linear-gradient(135deg, var(--bg-tertiary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            padding: 20px;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
        }
        
        .header h1 {
            font-size: 22px;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .header p {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        .nav {
            display: flex;
            overflow-x: auto;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 71px;
            z-index: 99;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        
        .nav::-webkit-scrollbar {
            display: none;
        }
        
        .nav button {
            flex-shrink: 0;
            min-width: 85px;
            padding: 14px 12px;
            border: none;
            background: none;
            font-size: 13px;
            font-weight: 600;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            border-bottom: 2px solid transparent;
        }
        
        .nav button.active {
            color: var(--accent-primary);
            border-bottom-color: var(--accent-primary);
            background: var(--bg-secondary);
        }
        
        .content {
            padding: 15px;
            flex: 1;
            overflow-y: auto;
            padding-bottom: 30px;
        }
        
        .week-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            overflow-x: auto;
            padding-bottom: 5px;
            -webkit-overflow-scrolling: touch;
        }
        
        .week-btn {
            padding: 10px 18px;
            border: 1px solid var(--border);
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border-radius: 8px;
            font-weight: 600;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        .week-btn.active {
            background: var(--accent-primary);
            color: var(--bg-primary);
            border-color: var(--accent-primary);
        }
        
        .warmup-section {
            background: rgba(251, 146, 60, 0.1);
            border-left: 3px solid var(--orange);
            border-radius: 12px;
            padding: 14px;
            margin-bottom: 12px;
        }
        
        .warmup-header {
            font-weight: 600;
            font-size: 15px;
            color: var(--orange);
            margin-bottom: 8px;
        }
        
        .warmup-item {
            color: var(--text-secondary);
            font-size: 13px;
            margin-bottom: 4px;
            padding-left: 12px;
            line-height: 1.5;
        }
        
        .exercise {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 14px;
            margin-bottom: 12px;
            border-left: 3px solid var(--accent-primary);
        }
        
        .exercise.core {
            border-left-color: var(--warning);
        }
        
        .exercise-header {
            font-weight: 600;
            font-size: 15px;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        
        .exercise-meta {
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 10px;
        }
        
        .previous-workout {
            background: rgba(167, 139, 250, 0.1);
            border: 1px solid var(--purple);
            border-radius: 6px;
            padding: 8px;
            margin-bottom: 10px;
            font-size: 12px;
        }
        
        .previous-workout-header {
            color: var(--purple);
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .previous-sets {
            color: var(--text-secondary);
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .previous-sets span {
            background: var(--bg-tertiary);
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 11px;
        }
        
        .sets-container {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .set-row {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .set-label {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            min-width: 45px;
        }
        
        .set-input {
            flex: 1;
            padding: 12px 10px;
            border: 1px solid var(--border);
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.2s;
        }
        
        .set-input::placeholder {
            color: var(--text-muted);
        }
        
        .set-input:focus {
            outline: none;
            border-color: var(--accent-primary);
            background: var(--bg-secondary);
        }
        
        .set-input.completed {
            background: rgba(0, 230, 118, 0.1);
            border-color: var(--success);
        }
        
        .check-btn {
            width: 44px;
            height: 44px;
            border: 1px solid var(--border);
            background: var(--bg-tertiary);
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            flex-shrink: 0;
        }
        
        .check-btn.checked {
            background: var(--success);
            color: var(--bg-primary);
            border-color: var(--success);
        }
        
        .burpee-section {
            background: linear-gradient(135deg, rgba(255, 0, 100, 0.15), rgba(255, 100, 0, 0.15));
            border: 2px solid #ff6b6b;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 15px;
        }
        
        .burpee-header {
            font-weight: 700;
            font-size: 16px;
            color: #ff6b6b;
            margin-bottom: 12px;
            text-align: center;
        }
        
        .burpee-inputs {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .burpee-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
        }
        
        .burpee-checkbox input[type="checkbox"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
        }
        
        .burpee-checkbox label {
            color: var(--text-primary);
            font-size: 14px;
            font-weight: 600;
        }
        
        .burpee-time {
            flex: 1;
        }
        
        .burpee-time-input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border);
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-radius: 8px;
            font-size: 14px;
        }
        
        .burpee-time-input::placeholder {
            color: var(--text-muted);
        }
        
        .burpee-time-input:focus {
            outline: none;
            border-color: #ff6b6b;
        }
        
        .cardio-section {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 14px;
            margin-bottom: 12px;
            border-left: 3px solid var(--success);
        }
        
        .cardio-header {
            font-weight: 600;
            font-size: 15px;
            color: var(--success);
            margin-bottom: 8px;
        }
        
        .cardio-description {
            color: var(--text-secondary);
            font-size: 13px;
            margin-bottom: 12px;
            font-style: italic;
            line-height: 1.4;
        }
        
        .cardio-input-row {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
            align-items: center;
        }
        
        .cardio-label {
            font-size: 13px;
            color: var(--text-secondary);
            min-width: 90px;
        }
        
        .cardio-input {
            flex: 1;
            padding: 10px;
            border: 1px solid var(--border);
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-radius: 8px;
            font-size: 14px;
        }
        
        .cardio-input:focus {
            outline: none;
            border-color: var(--success);
        }
        
        .notes-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }
        
        .notes-label {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-primary);
            font-size: 14px;
        }
        
        .notes-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
            min-height: 80px;
        }
        
        .notes-input::placeholder {
            color: var(--text-muted);
        }
        
        .notes-input:focus {
            outline: none;
            border-color: var(--accent-primary);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: var(--card-bg);
            padding: 18px;
            border-radius: 12px;
            text-align: center;
            border-left: 3px solid var(--accent-primary);
        }
        
        .stat-card.success {
            border-left-color: var(--success);
        }
        
        .stat-card.burpee {
            border-left-color: #ff6b6b;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--accent-primary);
            margin-bottom: 5px;
        }
        
        .stat-value.success {
            color: var(--success);
        }
        
        .stat-value.burpee {
            color: #ff6b6b;
        }
        
        .stat-label {
            font-size: 11px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .pr-input-group {
            margin-bottom: 15px;
        }
        
        .pr-label {
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--text-primary);
            font-size: 13px;
        }
        
        .pr-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-radius: 8px;
            font-size: 16px;
        }
        
        .pr-input::placeholder {
            color: var(--text-muted);
        }
        
        .pr-input:focus {
            outline: none;
            border-color: var(--accent-primary);
        }
        
        .percentage-display {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            font-size: 11px;
            color: var(--text-secondary);
        }
        
        .percentage-display span {
            flex: 1;
            text-align: center;
            padding: 6px;
            background: var(--bg-tertiary);
            border-radius: 5px;
            border: 1px solid var(--border);
        }
        
        .percentage-display strong {
            color: var(--accent-primary);
        }
        
        .save-btn {
            width: 100%;
            padding: 16px;
            background: var(--accent-primary);
            color: var(--bg-primary);
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.2s;
        }
        
        .save-btn:active {
            transform: scale(0.98);
            background: var(--accent-secondary);
        }
        
        .progress-guide {
            background: rgba(255, 214, 0, 0.1);
            border-left: 3px solid var(--warning);
            padding: 14px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .progress-guide h3 {
            color: var(--warning);
            margin-bottom: 8px;
            font-size: 15px;
        }
        
        .progress-guide p {
            color: var(--text-secondary);
            font-size: 13px;
            line-height: 1.5;
        }
        
        .hidden {
            display: none;
        }
        
        .goals-list {
            background: var(--card-bg);
            padding: 15px;
            border-radius: 8px;
            line-height: 1.9;
            font-size: 14px;
            color: var(--text-secondary);
        }
        
        .goals-list div {
            padding: 5px 0;
        }
        
        .section-header {
            margin-bottom: 15px;
            color: var(--text-primary);
            font-size: 16px;
            font-weight: 600;
        }
        
        .week-summary {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
        }
        
        .week-summary h3 {
            font-size: 14px;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        
        .week-stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 13px;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border);
        }
        
        .week-stat-row:last-child {
            border-bottom: none;
        }
        
        .week-stat-row strong {
            color: var(--accent-primary);
        }
        
        @media (min-width: 600px) {
            .container {
                max-width: 600px;
                margin: 20px auto;
                border-radius: 20px;
                overflow: hidden;
            }
            
            .header {
                border-radius: 20px 20px 0 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Strength Block Tracker</h1>
            <p>4-Week Pre-Triathlon Power Phase</p>
        </div>
        
        <div class="nav">
            <button class="nav-btn active" data-page="overview">Overview</button>
            <button class="nav-btn" data-page="day1">Day 1</button>
            <button class="nav-btn" data-page="day2">Day 2</button>
            <button class="nav-btn" data-page="day3">Day 3</button>
            <button class="nav-btn" data-page="day4">Day 4</button>
            <button class="nav-btn" data-page="day5">Day 5</button>
            <button class="nav-btn" data-page="day6">Day 6</button>
            <button class="nav-btn" data-page="day7">Day 7</button>
        </div>
        
        <div class="content">
            <!-- Overview Page -->
            <div id="overview" class="page">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="completedSessions">0</div>
                        <div class="stat-label">Sessions Complete</div>
                    </div>
                    <div class="stat-card success">
                        <div class="stat-value success" id="totalCardio">0.0</div>
                        <div class="stat-label">Total Cardio</div>
                    </div>
                    <div class="stat-card burpee">
                        <div class="stat-value burpee" id="burpeeStreak">0</div>
                        <div class="stat-label">Burpee Streak</div>
                    </div>
                    <div class="stat-card burpee">
                        <div class="stat-value burpee" id="totalBurpees">0</div>
                        <div class="stat-label">Total Burpees</div>
                    </div>
                </div>
                
                <div class="week-summary">
                    <h3>Current Week Progress</h3>
                    <div class="week-stat-row">
                        <span>Week</span>
                        <strong id="currentWeekDisplay">1</strong>
                    </div>
                    <div class="week-stat-row">
                        <span>Sessions This Week</span>
                        <strong id="weekSessions">0 / 6</strong>
                    </div>
                    <div class="week-stat-row">
                        <span>Cardio This Week</span>
                        <strong id="weekCardio">0.0</strong>
                    </div>
                    <div class="week-stat-row">
                        <span>Burpees This Week</span>
                        <strong id="weekBurpees">0 / 7</strong>
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h3 class="section-header">Current PRs</h3>
                    
                    <div class="pr-input-group">
                        <div class="pr-label">Clean 1RM (lbs)</div>
                        <input type="number" class="pr-input" id="cleanPR" placeholder="Enter your 1RM" inputmode="numeric">
                        <div class="percentage-display">
                            <span>65%: <strong id="clean65">-</strong></span>
                            <span>70%: <strong id="clean70">-</strong></span>
                            <span>75%: <strong id="clean75">-</strong></span>
                        </div>
                    </div>
                    
                    <div class="pr-input-group">
                        <div class="pr-label">Snatch 1RM (lbs)</div>
                        <input type="number" class="pr-input" id="snatchPR" placeholder="Enter your 1RM" inputmode="numeric">
                        <div class="percentage-display">
                            <span>60%: <strong id="snatch60">-</strong></span>
                            <span>65%: <strong id="snatch65">-</strong></span>
                            <span>70%: <strong id="snatch70">-</strong></span>
                        </div>
                    </div>
                    
                    <div class="pr-input-group">
                        <div class="pr-label">Front Squat 1RM (lbs)</div>
                        <input type="number" class="pr-input" id="frontSquatPR" placeholder="Enter your 1RM" inputmode="numeric">
                        <div class="percentage-display">
                            <span>72%: <strong id="fs72">-</strong></span>
                            <span>80%: <strong id="fs80">-</strong></span>
                        </div>
                    </div>
                    
                    <div class="pr-input-group">
                        <div class="pr-label">Back Squat 1RM (lbs)</div>
                        <input type="number" class="pr-input" id="backSquatPR" placeholder="Enter your 1RM" inputmode="numeric">
                        <div class="percentage-display">
                            <span>78%: <strong id="bs78">-</strong></span>
                            <span>85%: <strong id="bs85">-</strong></span>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <h3 class="section-header">Phase Goals</h3>
                    <div class="goals-list">
                        <div>Build leg strength and power</div>
                        <div>Improve Olympic lift technique (65-75%)</div>
                        <div>Develop medial and rear delts</div>
                        <div>Maintain 10+ miles per week running</div>
                        <div>100 burpees daily challenge</div>
                    </div>
                </div>
            </div>
            
            <!-- Day Pages (dynamically rendered) -->
            <div id="day1" class="page hidden"></div>
            <div id="day2" class="page hidden"></div>
            <div id="day3" class="page hidden"></div>
            <div id="day4" class="page hidden"></div>
            <div id="day5" class="page hidden"></div>
            <div id="day6" class="page hidden"></div>
            <div id="day7" class="page hidden"></div>
        </div>
    </div>

    <script>
        // Data structure
        const workoutData = {
            day1: {
                name: 'Clean Technique + Upper Push',
                warmup: [
                    '3-5 min easy cardio (row/bike/jog)',
                    'Hip 90/90 stretches - 5 each side',
                    'World\'s greatest stretch - 3 each side',
                    'Ankle rocks - 10 each',
                    'Scap push-ups - 10 reps',
                    'Band pull-aparts - 15 reps',
                    'Empty barbell: 5 hang muscle cleans, 5 front squats, 5 press'
                ],
                exercises: [
                    { name: 'A. Clean Complex', sets: 5, reps: '1+1+1', notes: 'Hang clean + Front squat + Jerk dip @ 65-75%' },
                    { name: 'B1. Front Squat', sets: 4, reps: '4', notes: '@ 72-80%' },
                    { name: 'B2. Pull-ups', sets: 4, reps: '6-8', notes: 'Add weight if easy' },
                    { name: 'C. Bulgarian Split Squat', sets: 3, reps: '8/leg', notes: 'DB or barbell' },
                    { name: 'D. Barbell Bench', sets: 3, reps: '6-8', notes: '@ RPE 7-8' },
                    { name: 'E1. DB Laterals', sets: 2, reps: '15', notes: 'Medial delt' },
                    { name: 'E2. Face Pulls', sets: 2, reps: '15', notes: 'Rear delt' },
                    { name: 'Core: Plank Series', sets: 3, reps: 'combo', notes: '30s front plank, 20s each side plank', core: true }
                ],
                cardio: {
                    description: 'Finisher: Assault bike 30s on / 30s off × 8-10 rounds @ RPE 7',
                    inputs: [
                        { label: 'Bike (min)', key: 'bike' }
                    ]
                }
            },
            day2: {
                name: 'Upper Hypertrophy + Aerobic',
                warmup: [
                    '5 min easy row or bike',
                    'Band pull-aparts - 20 reps',
                    'Band dislocations - 10 reps',
                    'Scap push-ups - 12 reps',
                    'Ring rows - 10 reps',
                    'Arm circles - 10 forward, 10 back',
                    'Light DB press - 10 reps'
                ],
                exercises: [
                    { name: 'A. Landmine Press', sets: 4, reps: '8/side', notes: 'Anti-rotation' },
                    { name: 'B. Chest-Supported Row', sets: 4, reps: '10', notes: 'Elbows 45-60 degrees' },
                    { name: 'C. DB Incline Press', sets: 3, reps: '10', notes: '2-sec eccentric' },
                    { name: 'D1. Face Pulls', sets: 3, reps: '12', notes: 'Giant set' },
                    { name: 'D2. Reverse Fly', sets: 3, reps: '12', notes: 'Light weight' },
                    { name: 'D3. Lean-away Laterals', sets: 3, reps: '10/side', notes: 'Hold pole' }
                ],
                cardio: {
                    description: 'Easy Z2 aerobic: 20-25 min row or bike at conversational pace (nose breathing)',
                    inputs: [
                        { label: 'Row (min)', key: 'row' },
                        { label: 'Bike (min)', key: 'bike' }
                    ]
                }
            },
            day3: {
                name: 'Snatch Technique + Posterior',
                warmup: [
                    '3-5 min easy cardio',
                    'PVC overhead squats - 10 reps',
                    'PVC snatch balance - 8 reps',
                    'Drop snatches - 6 reps',
                    'Ankle mobility rocks - 10 each',
                    'Hip flexor stretches - 30s each',
                    'Empty bar: 5 snatch pulls, 5 hang snatches'
                ],
                exercises: [
                    { name: 'A. Snatch Complex', sets: 6, reps: '1+1+1', notes: 'Pull + Hang power snatch + OHS @ 60-70%' },
                    { name: 'B. RDL', sets: 4, reps: '6-8', notes: '@ RPE 7-8' },
                    { name: 'C. Belt Squat', sets: 4, reps: '8', notes: 'Tempo 3-sec Wk2-3' },
                    { name: 'D1. Sandbag March', sets: 3, reps: ':30', notes: 'Front-rack' },
                    { name: 'D2. Ring Fallouts', sets: 3, reps: '10', notes: 'Core' },
                    { name: 'Core: Dead Bug', sets: 3, reps: '12/side', notes: 'Slow and controlled', core: true }
                ],
                cardio: {
                    description: 'Optional finisher: 5 rounds of 250m row @ 5k pace, 60s easy between rounds',
                    inputs: [
                        { label: 'Row (meters)', key: 'row' }
                    ]
                }
            },
            day4: {
                name: 'KB/Sandbag GPP + Delts',
                warmup: [
                    'Light KB swings - 15 reps',
                    'Hip airplanes - 5 each side',
                    'Cossack squats - 5 each side',
                    'KB halos - 5 each direction',
                    'Goblet squat hold - 30s',
                    'Shoulder CARs - 5 each direction'
                ],
                exercises: [
                    { name: 'A. KB Complex', sets: 5, reps: '6+6+6', notes: 'Swings + cleans + squats' },
                    { name: 'B. Sandbag Bear Squats', sets: 4, reps: '12', notes: 'Pump, not grinding' },
                    { name: 'C1. TRX T-Y-I', sets: 3, reps: '10 each', notes: 'Rear delt' },
                    { name: 'C2. DB Laterals', sets: 3, reps: '12', notes: 'Medial delt' },
                    { name: 'Core: Hollow Holds', sets: 3, reps: '20-30s', notes: 'Lower back pressed down', core: true }
                ],
                cardio: {
                    description: 'Z2 flush: 12-20 min easy bike OR 2-mile recovery jog (only if legs feel good)',
                    inputs: [
                        { label: 'Run (miles)', key: 'run' },
                        { label: 'Bike (min)', key: 'bike' }
                    ]
                }
            },
            day5: {
                name: 'Lower Strength + OH Press',
                warmup: [
                    '5 min easy bike or row',
                    'Adductor rocks - 8 each side',
                    'Glute bridges - 15 reps',
                    'Goblet squats - 10 reps',
                    'Ankle mobility - 10 each',
                    'Empty bar squats - 10 reps',
                    'Build up: 40%, 60%, 70% x 3 reps each'
                ],
                exercises: [
                    { name: 'A. Back Squat', sets: 5, reps: '3', notes: '@ 78-85%' },
                    { name: 'B. Strict OH Press', sets: 4, reps: '5', notes: '@ RPE 8' },
                    { name: 'C. Romanian Split Squat', sets: 3, reps: '8/leg', notes: 'Back foot elevated' },
                    { name: 'D. Walking Lunges', sets: 3, reps: '12/leg', notes: 'Control and balance' },
                    { name: 'E. Weighted Dips', sets: 4, reps: '6-8', notes: '@ RPE 8' },
                    { name: 'F. Face Pulls', sets: 2, reps: '20', notes: 'Rear delt' },
                    { name: 'Core: Pallof Press', sets: 3, reps: '10/side', notes: 'Anti-rotation', core: true }
                ],
                cardio: null
            },
            day6: {
                name: 'Run/Bike Intervals + Skill',
                warmup: [
                    '10 min easy run or bike (build gradually)',
                    'Leg swings - 10 forward/back, 10 side/side',
                    'High knees - 20 steps',
                    'Butt kicks - 20 steps',
                    'A-skips - 20 steps',
                    'Build-up runs - 3x50m @ 70-80-90%'
                ],
                exercises: [
                    { name: 'B. Barbell Skill EMOM', sets: 12, reps: '2 reps', notes: 'Cleans, jerks, snatch pulls @ 60%' },
                    { name: 'C1. Cable Laterals', sets: 4, reps: '15', notes: 'Medial delt' },
                    { name: 'C2. Band Pull-aparts', sets: 3, reps: '20', notes: 'Rear delt' }
                ],
                cardio: {
                    description: 'Main workout: RUNNING: 10×1 min on / 1 min off @ 5k effort (jog recovery) OR BIKE: 12×40s hard / 80s easy @ RPE 8',
                    inputs: [
                        { label: 'Run (miles)', key: 'run' },
                        { label: 'Bike (min)', key: 'bike' }
                    ]
                }
            },
            day7: {
                name: 'Easy Run or Recovery',
                warmup: [
                    'Start very easy - first 5 min below conversation pace',
                    'Gradually build to steady Z2',
                    'Focus on nasal breathing'
                ],
                exercises: [
                    { name: 'Mobility Flow', sets: 1, reps: '10-15 min', notes: 'Hips, ankles, T-spine focus' },
                    { name: 'Core: Dead Bug + Bird Dog', sets: 2, reps: '10/side', notes: 'Quality over speed', core: true }
                ],
                cardio: {
                    description: 'Easy recovery: 30-40 min Z2 run (3-4 mi) OR 20-30 min continuous swim OR 45-60 min easy bike',
                    inputs: [
                        { label: 'Run (miles)', key: 'run' },
                        { label: 'Swim (min)', key: 'swim' },
                        { label: 'Bike (min)', key: 'bike' }
                    ]
                }
            }
        };

        const progressionGuides = {
            1: 'TECHNIQUE & BASE: Oly 65-70%, squats 72-78%. Focus bar speed. RPE 6-7 accessories. Film lifts.',
            2: 'BUILD: Add 2-5% to main lifts. Oly 70-75%. Belt squat TEMPO (3-sec down).',
            3: 'POWER: Drop load 5% but increase bar speed. Clusters on Oly (2+2 w/ 15s rest). Intervals 45/45.',
            4: 'DELOAD: -20-30% volume. Light Oly technique only (65%). Z2 emphasis. No heavy eccentrics.',
            5: 'OPTIONAL: Repeat Week 2 with +5% OR transition to more swim/bike.',
            6: 'OPTIONAL: Repeat Week 3 OR start 70.3 base with 2-3 strength sessions.'
        };

        // Initialize storage
        let userData = JSON.parse(localStorage.getItem('workoutTracker')) || {
            prs: {},
            workouts: {},
            currentWeek: 1
        };

        // Navigation
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const page = btn.dataset.page;
                document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                document.querySelectorAll('.page').forEach(p => p.classList.add('hidden'));
                document.getElementById(page).classList.remove('hidden');
                
                if (page === 'overview') {
                    updateStats();
                } else {
                    renderWorkoutPage(page);
                }
            });
        });

        // PR calculations
        ['clean', 'snatch', 'frontSquat', 'backSquat'].forEach(lift => {
            const input = document.getElementById(`${lift}PR`);
            if (input) {
                input.addEventListener('input', () => {
                    const value = parseFloat(input.value);
                    if (value) {
                        userData.prs[lift] = value;
                        saveData();
                        updatePercentages(lift, value);
                    }
                });
                
                if (userData.prs[lift]) {
                    input.value = userData.prs[lift];
                    updatePercentages(lift, userData.prs[lift]);
                }
            }
        });

        function updatePercentages(lift, value) {
            const percentages = {
                clean: [65, 70, 75],
                snatch: [60, 65, 70],
                frontSquat: [72, 80],
                backSquat: [78, 85]
            };
            
            percentages[lift].forEach(pct => {
                const elem = document.getElementById(`${lift === 'frontSquat' ? 'fs' : lift === 'backSquat' ? 'bs' : lift}${pct}`);
                if (elem) {
                    elem.textContent = Math.round(value * pct / 100);
                }
            });
        }

        function getPreviousWorkout(day, currentWeek) {
            for (let w = currentWeek - 1; w >= 1; w--) {
                if (userData.workouts[day] && userData.workouts[day][w]) {
                    const weekData = userData.workouts[day][w];
                    if (Object.keys(weekData.sets).length > 0) {
                        return { week: w, data: weekData };
                    }
                }
            }
            return null;
        }

        function renderWorkoutPage(day) {
            const page = document.getElementById(day);
            page.innerHTML = '';
            
            const weekSelector = document.createElement('div');
            weekSelector.className = 'week-selector';
            for (let w = 1; w <= 6; w++) {
                const btn = document.createElement('button');
                btn.className = `week-btn ${w === userData.currentWeek ? 'active' : ''}`;
                btn.textContent = `Week ${w}`;
                btn.onclick = () => {
                    userData.currentWeek = w;
                    saveData();
                    renderWorkoutPage(day);
                    updateStats();
                };
                weekSelector.appendChild(btn);
            }
            page.appendChild(weekSelector);
            
            const content = document.createElement('div');
            
            const guideDiv = document.createElement('div');
            guideDiv.className = 'progress-guide';
            guideDiv.innerHTML = `
                <h3>Week ${userData.currentWeek} Guide</h3>
                <p>${progressionGuides[userData.currentWeek]}</p>
            `;
            content.appendChild(guideDiv);
            
            const burpeeDiv = document.createElement('div');
            burpeeDiv.className = 'burpee-section';
            
            const workout = workoutData[day];
            if (!userData.workouts[day]) userData.workouts[day] = {};
            if (!userData.workouts[day][userData.currentWeek]) {
                userData.workouts[day][userData.currentWeek] = { 
                    sets: {}, 
                    cardio: {}, 
                    notes: '', 
                    feel: '',
                    burpeeComplete: false,
                    burpeeTime: ''
                };
            }
            
            const weekData = userData.workouts[day][userData.currentWeek];
            
            burpeeDiv.innerHTML = `
                <div class="burpee-header">100 Burpee Challenge</div>
                <div class="burpee-inputs">
                    <div class="burpee-checkbox">
                        <input type="checkbox" id="burpee-complete" ${weekData.burpeeComplete ? 'checked' : ''}>
                        <label for="burpee-complete">Completed</label>
                    </div>
                    <div class="burpee-time">
                        <input type="text" 
                               class="burpee-time-input" 
                               id="burpee-time" 
                               placeholder="Time (e.g., 8:45)"
                               value="${weekData.burpeeTime || ''}">
                    </div>
                </div>
            `;
            content.appendChild(burpeeDiv);
            
            if (workout.warmup) {
                const warmupDiv = document.createElement('div');
                warmupDiv.className = 'warmup-section';
                warmupDiv.innerHTML = `
                    <div class="warmup-header">Warm-up Routine</div>
                    ${workout.warmup.map(item => `<div class="warmup-item">• ${item}</div>`).join('')}
                `;
                content.appendChild(warmupDiv);
            }
            
            const previousWorkout = getPreviousWorkout(day, userData.currentWeek);
            
            workout.exercises.forEach((ex, idx) => {
                const exerciseDiv = document.createElement('div');
                exerciseDiv.className = ex.core ? 'exercise core' : 'exercise';
                
                let exerciseHTML = `
                    <div class="exercise-header">${ex.name}</div>
                    <div class="exercise-meta">${ex.sets > 1 ? ex.sets + 'x' : ''}${ex.reps} - ${ex.notes}</div>
                `;
                
                if (previousWorkout && previousWorkout.data.sets) {
                    const prevSets = [];
                    for (let s = 1; s <= ex.sets; s++) {
                        const key = `${idx}-${s}`;
                        const prevValue = previousWorkout.data.sets[key];
                        if (prevValue) {
                            prevSets.push(prevValue);
                        }
                    }
                    
                    if (prevSets.length > 0) {
                        exerciseHTML += `
                            <div class="previous-workout">
                                <div class="previous-workout-header">Week ${previousWorkout.week}:</div>
                                <div class="previous-sets">
                                    ${prevSets.map(s => `<span>${s}</span>`).join('')}
                                </div>
                            </div>
                        `;
                    }
                }
                
                let setsHTML = '';
                for (let s = 1; s <= ex.sets; s++) {
                    const key = `${idx}-${s}`;
                    const value = weekData.sets[key] || '';
                    const checked = value ? 'checked' : '';
                    const completedClass = value ? 'completed' : '';
                    
                    setsHTML += `
                        <div class="set-row">
                            <div class="set-label">Set ${s}</div>
                            <input type="text" 
                                   class="set-input ${completedClass}" 
                                   placeholder="185x5"
                                   data-key="${key}"
                                   value="${value}"
                                   inputmode="text">
                            <div class="check-btn ${checked}" data-key="${key}">✓</div>
                        </div>
                    `;
                }
                
                exerciseHTML += `<div class="sets-container">${setsHTML}</div>`;
                exerciseDiv.innerHTML = exerciseHTML;
                content.appendChild(exerciseDiv);
            });
            
            if (workout.cardio) {
                const cardioDiv = document.createElement('div');
                cardioDiv.className = 'cardio-section';
                
                let cardioHTML = `
                    <div class="cardio-header">Cardio</div>
                    <div class="cardio-description">${workout.cardio.description}</div>
                `;
                
                workout.cardio.inputs.forEach(cardioItem => {
                    const value = weekData.cardio[cardioItem.key] || '';
                    cardioHTML += `
                        <div class="cardio-input-row">
                            <div class="cardio-label">${cardioItem.label}</div>
                            <input type="number" 
                                   class="cardio-input" 
                                   data-cardio-key="${cardioItem.key}"
                                   value="${value}"
                                   placeholder="0"
                                   step="0.1"
                                   inputmode="decimal">
                        </div>
                    `;
                });
                
                cardioDiv.innerHTML = cardioHTML;
                content.appendChild(cardioDiv);
            }
            
            const notesDiv = document.createElement('div');
            notesDiv.className = 'notes-section';
            notesDiv.innerHTML = `
                <div class="notes-label">Session Notes & Feel (1-10)</div>
                <textarea class="notes-input" id="${day}-notes" placeholder="How did it feel? Any PRs? Technique notes?">${weekData.notes || ''}</textarea>
                <input type="number" class="pr-input" id="${day}-feel" min="1" max="10" placeholder="Feel Rating (1-10)" value="${weekData.feel || ''}" style="margin-top: 10px;" inputmode="numeric">
            `;
            content.appendChild(notesDiv);
            
            const saveBtn = document.createElement('button');
            saveBtn.className = 'save-btn';
            saveBtn.textContent = 'Save Workout';
            saveBtn.onclick = () => saveWorkout(day);
            content.appendChild(saveBtn);
            
            page.appendChild(content);
            
            setTimeout(() => {
                const burpeeCheck = document.getElementById('burpee-complete');
                const burpeeTimeInput = document.getElementById('burpee-time');
                
                if (burpeeCheck) {
                    burpeeCheck.addEventListener('change', (e) => {
                        weekData.burpeeComplete = e.target.checked;
                        saveData();
                        updateStats();
                    });
                }
                
                if (burpeeTimeInput) {
                    burpeeTimeInput.addEventListener('input', (e) => {
                        weekData.burpeeTime = e.target.value;
                        saveData();
                    });
                }
                
                page.querySelectorAll('.set-input').forEach(input => {
                    input.addEventListener('input', (e) => {
                        const key = e.target.dataset.key;
                        weekData.sets[key] = e.target.value;
                        if (e.target.value) {
                            e.target.classList.add('completed');
                            const checkBtn = page.querySelector(`.check-btn[data-key="${key}"]`);
                            if (checkBtn) checkBtn.classList.add('checked');
                        } else {
                            e.target.classList.remove('completed');
                            const checkBtn = page.querySelector(`.check-btn[data-key="${key}"]`);
                            if (checkBtn) checkBtn.classList.remove('checked');
                        }
                        saveData();
                        updateStats();
                    });
                });
                
                page.querySelectorAll('.check-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const key = btn.dataset.key;
                        const input = page.querySelector(`.set-input[data-key="${key}"]`);
                        if (input.value) {
                            btn.classList.toggle('checked');
                            input.classList.toggle('completed');
                        }
                    });
                });
                
                page.querySelectorAll('.cardio-input').forEach(input => {
                    input.addEventListener('input', (e) => {
                        const key = e.target.dataset.cardioKey;
                        weekData.cardio[key] = e.target.value;
                        saveData();
                        updateStats();
                    });
                });
            }, 0);
        }

        function saveWorkout(day) {
            const weekData = userData.workouts[day][userData.currentWeek];
            const notesInput = document.getElementById(`${day}-notes`);
            const feelInput = document.getElementById(`${day}-feel`);
            
            if (notesInput) weekData.notes = notesInput.value;
            if (feelInput) weekData.feel = feelInput.value;
            
            saveData();
            updateStats();
            
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = 'Saved!';
            btn.style.background = 'var(--success)';
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = 'var(--accent-primary)';
            }, 1500);
        }

        function saveData() {
            localStorage.setItem('workoutTracker', JSON.stringify(userData));
        }

        function updateStats() {
            let totalSessions = 0;
            let weekSessions = 0;
            
            Object.keys(userData.workouts).forEach(day => {
                Object.keys(userData.workouts[day]).forEach(week => {
                    const weekData = userData.workouts[day][week];
                    const hasData = Object.keys(weekData.sets).some(key => weekData.sets[key]);
                    if (hasData) {
                        totalSessions++;
                        if (parseInt(week) === userData.currentWeek) {
                            weekSessions++;
                        }
                    }
                });
            });
            
            let totalCardio = 0;
            let weekCardio = 0;
            
            Object.keys(userData.workouts).forEach(day => {
                Object.keys(userData.workouts[day]).forEach(week => {
                    const weekData = userData.workouts[day][week];
                    if (weekData.cardio) {
                        Object.values(weekData.cardio).forEach(value => {
                            const num = parseFloat(value) || 0;
                            totalCardio += num;
                            if (parseInt(week) === userData.currentWeek) {
                                weekCardio += num;
                            }
                        });
                    }
                });
            });
            
            let totalBurpees = 0;
            let weekBurpees = 0;
            
            Object.keys(userData.workouts).forEach(day => {
                Object.keys(userData.workouts[day]).forEach(week => {
                    const weekData = userData.workouts[day][week];
                    if (weekData.burpeeComplete) {
                        totalBurpees += 100;
                        if (parseInt(week) === userData.currentWeek) {
                            weekBurpees++;
                        }
                    }
                });
            });
            
            const days = ['day1', 'day2', 'day3', 'day4', 'day5', 'day6', 'day7'];
            let streakCount = 0;
            for (let i = days.length - 1; i >= 0; i--) {
                const day = days[i];
                if (userData.workouts[day] && userData.workouts[day][userData.currentWeek] && userData.workouts[day][userData.currentWeek].burpeeComplete) {
                    streakCount++;
                } else if (streakCount > 0) {
                    break;
                }
            }
            
            document.getElementById('completedSessions').textContent = totalSessions;
            document.getElementById('totalCardio').textContent = totalCardio.toFixed(1);
            document.getElementById('currentWeekDisplay').textContent = userData.currentWeek;
            document.getElementById('weekSessions').textContent = `${weekSessions} / 6`;
            document.getElementById('weekCardio').textContent = weekCardio.toFixed(1);
            document.getElementById('burpeeStreak').textContent = streakCount;
            document.getElementById('totalBurpees').textContent = totalBurpees;
            document.getElementById('weekBurpees').textContent = `${weekBurpees} / 7`;
        }

        updateStats();
    </script>
</body>
</html>
